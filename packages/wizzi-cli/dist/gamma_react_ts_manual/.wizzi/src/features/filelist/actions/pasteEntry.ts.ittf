module
    import createEntryAtPath from './createEntryAtPath'
    import updateEntry from './updateEntry'
    import 
        @ isInsideFolder
        @ changeParentPath
        from '../fileUtilities'
    import 
        @ FileSystemEntry
        from '../types'
    export-default 
        function handleEntryPaste
            param entries
                :[ 
                    :ref FileSystemEntry
            param path
                :union 
                    :string 
                    :undefined 
            param e
                :ref FileSystemEntry
            const entry = createEntryAtPath(entries, path, e, '- Copy')
            if e.item.type === 'folder'
                const children
                    _ entries.filter
                        => 
                            param it
                            # Get children of the old folder
                            _ isInsideFolder(it.item.path, e.item.path)
                        ._ map
                            => 
                                param it
                                # Update the parent folder name to the new one
                                _ updateEntry
                                    @ it
                                    { 
                                        { item
                                            @ path changeParentPath(it.item.path, e.item.path, entry.item.path)
                return 
                    [ 
                        @ ...entries
                        @ ...children
                        @ entry
            else
                return 
                    [ 
                        @ ...entries
                        @ entry
